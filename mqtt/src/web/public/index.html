<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IoT Device Management Platform</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/mqtt@5.3.4/dist/mqtt.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-microchip"></i> IoT Device Management Platform</h1>
            <div class="connection-status">
                <span id="connectionStatus" class="status-disconnected">Disconnected</span>
                <span id="deviceCount">0 devices</span>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="tab-navigation">
            <button class="tab-btn active" data-tab="dashboard">
                <i class="fas fa-tachometer-alt"></i> Dashboard
            </button>
            <button class="tab-btn" data-tab="devices">
                <i class="fas fa-mobile-alt"></i> Device Management
            </button>
            <button class="tab-btn" data-tab="control">
                <i class="fas fa-gamepad"></i> Device Control
            </button>
            <button class="tab-btn" data-tab="logs">
                <i class="fas fa-file-alt"></i> Device Logs
            </button>
            <button class="tab-btn" data-tab="topics">
                <i class="fas fa-list"></i> Topic Management
            </button>
        </nav>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="dashboard">
                <div class="devices-panel">
                    <h2><i class="fas fa-mobile-alt"></i> Connected Devices</h2>
                    <div id="devicesList" class="devices-list">
                        <div class="no-devices">No devices connected</div>
                    </div>
                </div>

                <div class="data-panel">
                    <h2><i class="fas fa-chart-line"></i> Real-time Data</h2>
                    <div id="dataStream" class="data-stream">
                        <div class="no-data">Waiting for device data...</div>
                    </div>
                </div>
            </div>

            <div class="alerts-panel">
                <h2><i class="fas fa-exclamation-triangle"></i> Alerts</h2>
                <div id="alertsList" class="alerts-list">
                    <div class="no-alerts">No alerts</div>
                </div>
            </div>

            <div class="filters-panel">
                <h2><i class="fas fa-filter"></i> Filters</h2>
                <div class="filter-controls">
                    <div class="filter-group">
                        <label for="topicFilter">Topic Filter:</label>
                        <select id="topicFilter" class="filter-select">
                            <option value="">All Topics</option>
                            <option value="iot/device/register">Device Registration</option>
                            <option value="iot/device/status">Device Status</option>
                            <option value="iot/sensor/data">Sensor Data (All)</option>
                            <option value="iot/sensor/ctl">Sensor Control (All)</option>
                            <option value="iot/device/heartbeat">Device Heartbeat</option>
                            <option value="iot/device/command">Device Commands</option>
                            <option value="iot/device/response">Device Responses</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="deviceFilter">Device ID Filter:</label>
                        <select id="deviceFilter" class="filter-select">
                            <option value="">All Devices</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="dataTypeFilter">Data Type:</label>
                        <select id="dataTypeFilter" class="filter-select">
                            <option value="">All Data</option>
                            <option value="sensor">Sensor Data Only</option>
                            <option value="status">Status Updates Only</option>
                            <option value="heartbeat">Heartbeats Only</option>
                            <option value="command">Commands Only</option>
                        </select>
                    </div>
                    <button id="clearFilters" class="btn btn-secondary">Clear Filters</button>
                </div>
            </div>

            <div class="controls">
                <button id="clearData" class="btn btn-secondary">Clear Data</button>
                <button id="exportData" class="btn btn-primary">Export Data</button>
            </div>
        </div>

        <!-- Device Management Tab -->
        <div id="devices" class="tab-content">
            <div class="management-header">
                <h2><i class="fas fa-mobile-alt"></i> Device Management</h2>
                <div class="management-actions">
                    <button id="refreshDevices" class="btn btn-primary">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                    <button id="addDevice" class="btn btn-success">
                        <i class="fas fa-plus"></i> Add Device
                    </button>
                </div>
            </div>

            <div class="devices-grid" id="devicesGrid">
                <!-- Device cards will be populated here -->
            </div>

            <!-- Device Details Modal -->
            <div id="deviceModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 id="modalTitle">Device Details</h3>
                        <span class="close">&times;</span>
                    </div>
                    <div class="modal-body" id="modalBody">
                        <!-- Device details will be populated here -->
                    </div>
                    <div class="modal-footer">
                        <button id="editDevice" class="btn btn-primary">Edit Device</button>
                        <button id="deleteDevice" class="btn btn-danger">Delete Device</button>
                        <button id="viewLogs" class="btn btn-secondary">View Logs</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Device Control Tab -->
        <div id="control" class="tab-content">
            <div class="management-header">
                <h2><i class="fas fa-gamepad"></i> Device Control</h2>
                <div class="management-actions">
                    <button id="refreshControlDevices" class="btn btn-primary">
                        <i class="fas fa-sync-alt"></i> Refresh Devices
                    </button>
                </div>
            </div>

            <div class="control-panel">
                <div class="device-selector">
                    <label for="controlDeviceSelect">Select Device:</label>
                    <select id="controlDeviceSelect" class="control-select">
                        <option value="">Choose a device...</option>
                    </select>
                </div>

                <div id="controlInterface" class="control-interface">
                    <div class="no-device-selected">
                        <i class="fas fa-hand-pointer"></i>
                        <p>Select a device to control it</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Device Logs Tab -->
        <div id="logs" class="tab-content">
            <div class="management-header">
                <h2><i class="fas fa-file-alt"></i> Device Logs</h2>
                <div class="management-actions">
                    <button id="refreshLogs" class="btn btn-primary">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                    <button id="exportLogs" class="btn btn-secondary">
                        <i class="fas fa-download"></i> Export Logs
                    </button>
                </div>
            </div>

            <div class="logs-panel">
                <div class="log-filters">
                    <div class="filter-group">
                        <label for="logDeviceSelect">Device:</label>
                        <select id="logDeviceSelect" class="filter-select">
                            <option value="">All Devices</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="logLevelSelect">Log Level:</label>
                        <select id="logLevelSelect" class="filter-select">
                            <option value="">All Levels</option>
                            <option value="error">Error</option>
                            <option value="warn">Warning</option>
                            <option value="info">Info</option>
                            <option value="debug">Debug</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="logDateRange">Date Range:</label>
                        <input type="date" id="logDateRange" class="filter-select">
                    </div>
                    <button id="applyLogFilters" class="btn btn-primary">Apply Filters</button>
                </div>

                <div id="logsList" class="logs-list">
                    <div class="no-logs">No logs available</div>
                </div>
            </div>
        </div>

        <!-- Topic Management Tab -->
        <div id="topics" class="tab-content">
            <div class="management-header">
                <h2><i class="fas fa-list"></i> Topic Management</h2>
                <div class="management-actions">
                    <button id="refreshTopics" class="btn btn-primary">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                    <button id="addTopic" class="btn btn-success">
                        <i class="fas fa-plus"></i> Add Topic
                    </button>
                </div>
            </div>

            <div class="topics-panel">
                <div class="topics-grid" id="topicsGrid">
                    <!-- Topic cards will be populated here -->
                </div>
            </div>

            <!-- Topic Details Modal -->
            <div id="topicModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 id="topicModalTitle">Topic Details</h3>
                        <span class="close">&times;</span>
                    </div>
                    <div class="modal-body" id="topicModalBody">
                        <!-- Topic details will be populated here -->
                    </div>
                    <div class="modal-footer">
                        <button id="editTopic" class="btn btn-primary">Edit Topic</button>
                        <button id="deleteTopic" class="btn btn-danger">Delete Topic</button>
                        <button id="subscribeTopic" class="btn btn-success">Subscribe</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="dashboard.js"></script>
</body>
</html>